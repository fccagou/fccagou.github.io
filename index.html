<!DOCTYPE html>
<html lang="en">
<head>
        <title>The Cagou's Blog</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="./theme/css/main.css" type="text/css" />
        <link href="./" type="application/atom+xml" rel="alternate" title="The Cagou's Blog Flux ATOM" />


        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie.css"/>
                <script src="./js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="./index.html">The Cagou's Blog</a></h1>
                <nav><ul>
                <li><a href="./index.html">Accueil</a></li>
                <li><a href="./archives.html">Archives</a></li>
                </ul></nav>
        </header><!-- /#banner -->

        
        
     <section id="content" class="body">
        <aside id="featured"><article>
                <h1 class="entry-title"><a href="./liaison-securisee-avec-openvpn.html">Liaison sécurisée avec openvpn</a></h1> 
                <footer class="post-info">
                        <abbr class="published" title="2019-05-25T19:00:00+02:00">
                                Publié le 25/05/2019 &agrave; 19:00
                        </abbr>

                        <address class="vcard author">
                                Par <a class="url fn" href="#">fccagou</a>
                        </address>
                <p>Dans <a href="./category/draft.html">Draft</a>. </p>
<p>tags: <a href="./tag/linux.html">Linux</a><a href="./tag/vpn.html">VPN</a><a href="./tag/security.html">Sécurity</a><a href="./tag/openvpn.html">Openvpn</a></p></p>                </footer><!-- /.post-info -->
                <h1>Objectif</h1>
<p>Créer liaison réseau sécurisée entre un système Linux et une passerelle d'accès
à un réseau distant.</p>
<h1>Contexte</h1>
<p>Le réseau distant est un réseau local d'un derrière une box d'un FAI. La
passerelle VPN est un <a href="https://www.raspberrypi.org/">Raspberry PI</a> sur lequel
est installé <a href="https://www.raspberrypi.org/downloads/raspbian/">raspbian</a>.</p>
<p>Parmi les serveur VPN disponibles, j'ai choisi
<a href="https://openvpn.net/community-resources/how-to">openvpn</a>.</p>
<p>Côté client, un poste Linux avec le client openvpn. </p>
<h1>Mise en œuvre</h1>
<h2>Synoptique</h2>
<ul>
<li>Mise en place d'une PKI</li>
<li>Installation et configuration du serveur</li>
<li>Installation et configuration du client</li>
<li>Tests de connexion</li>
<li>Routage et firewall sur le serveur</li>
</ul>
<h2>Mise en place d'une PKI</h2>
<p>L'échange entre le client et le serveur se fait à l'aide de TLS pour lequel il
faut créer les certificats serveur et client.</p>
<p>Il est possible de mettre en place des certifiatc auto signés mais l'idéal est
de créer une PKI indépendante pour générer les certificats.</p>
<p>Cela se fait avec openssl que l'on trouve sur toutes les distribution linux. Il
suffit de l'installer à coup de xi<code>apt</code>, <code>pacman</code>, <code>yum</code> ...</p>
<p>Pour la documentation, <code>man ca</code> explique bien les choses. </p>
<p>L'idéal est de créer sa PKI sur un système non connecté à internet pour
protéger la clé privée du CA. On peut aussi utiliser des tocken. Le projet 
<a href="https://github.com/sloonz/yubikey-ca">yubikey-ca</a> est un exemple de mise en
œuvre avec une <a href="https://www.yubico.com/">yubikey</a>.</p>
<p>Le Net regorge de documentation sur le sujet. Parmi elles, <a href="https://pki-tutorial.readthedocs.io/en/latest/">pki
tutorial</a> est plutôt bien
documentée.</p>
<h2>Installation et configuration du serveur</h2>
<h3>Installation</h3>
<p>S'agissant d'une distribution de type <a href="https://www.debian.org">Debian</a>,
l'installation de openvpn se fait simplement par </p>
<div class="highlight"><pre><span></span>$ sudo apt install openvpn
$ sudo systemctl <span class="nb">enable</span> openvpn
</pre></div>


<h3>Configuration</h3>
<p>Sur les système avec systemd, le service openvpn est un template, ce qui permet
d'exécuter plusieurs serveurs. Le nom du service passé en paramètre est utilisé
dans le service pour choisir le fichier de configuration associé <em>(%i)</em>.</p>
<div class="highlight"><pre><span></span><span class="err">$</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="k">system</span><span class="o">/</span><span class="n">openvpn</span><span class="err">@</span><span class="p">.</span><span class="n">service</span><span class="w"></span>
<span class="o">[</span><span class="n">Unit</span><span class="o">]</span><span class="w"></span>
<span class="n">Description</span><span class="o">=</span><span class="n">OpenVPN</span><span class="w"> </span><span class="k">connection</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="o">%</span><span class="n">i</span><span class="w"></span>
<span class="n">PartOf</span><span class="o">=</span><span class="n">openvpn</span><span class="p">.</span><span class="n">service</span><span class="w"></span>
<span class="n">ReloadPropagatedFrom</span><span class="o">=</span><span class="n">openvpn</span><span class="p">.</span><span class="n">service</span><span class="w"></span>

<span class="o">[</span><span class="n">Service</span><span class="o">]</span><span class="w"></span>
<span class="n">Type</span><span class="o">=</span><span class="n">forking</span><span class="w"></span>
<span class="n">ExecStart</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">openvpn</span><span class="w"> </span><span class="c1">--daemon ovpn-%i --status /run/openvpn/%i.status 10 --cd /etc/openvpn --config /etc/openvpn/%i.conf</span>
<span class="n">ExecReload</span><span class="o">=/</span><span class="n">bin</span><span class="o">/</span><span class="k">kill</span><span class="w"> </span><span class="o">-</span><span class="n">HUP</span><span class="w"> </span><span class="err">$</span><span class="n">MAINPID</span><span class="w"></span>
<span class="n">WorkingDirectory</span><span class="o">=/</span><span class="n">etc</span><span class="o">/</span><span class="n">openvpn</span><span class="w"></span>

<span class="o">[</span><span class="n">Install</span><span class="o">]</span><span class="w"></span>
<span class="n">WantedBy</span><span class="o">=</span><span class="n">multi</span><span class="o">-</span><span class="k">user</span><span class="p">.</span><span class="n">target</span><span class="w"></span>
</pre></div>


<p>Aussi, pour créer un service vpn ayant pour nom <code>monvpn1</code>, il faut créer le
fichier de configuration <code>/etc/openvpn/monvpn1.conf</code> et lancer le service
<code>openvpn@monvpn1.service</code></p>
<p>Voici un exemple de fichier de configuration générique.</p>
<div class="highlight"><pre><span></span><span class="err">port 1194</span>
<span class="err">proto udp</span>
<span class="err">dev tun</span>
<span class="err">ca ca.crt</span>
<span class="err">cert server.crt</span>
<span class="err">key server.key  # This file should be kept secret</span>
<span class="err">dh dh4096.pem</span>
<span class="err">server 10.8.0.0 255.255.255.0</span>
<span class="err">ifconfig-pool-persist ipp.txt</span>
<span class="err">push &quot;redirect-gateway def1 bypass-dhcp&quot;</span>
<span class="err">keepalive 10 120</span>
<span class="err">tls-auth ta.key 0 # This file is secret</span>
<span class="err">cipher AES-256-CBC</span>
<span class="err">user nobody</span>
<span class="err">group nobody</span>
<span class="err">persist-key</span>
<span class="err">persist-tun</span>
<span class="err">status openvpn-status.log</span>
<span class="err">verb 3</span>
<span class="err">explicit-exit-notify 1</span>
</pre></div>


<h3>Création des éléments de chiffrement</h3>
<p>Création de la clé de chiffrement</p>
<div class="highlight"><pre><span></span><span class="err">openssl</span>
</pre></div>


<p>Création de la demande de signature du certificat
Signature du certificat
Mise en place des certificats</p>
<h2>Installation et configuration du client</h2>
<h2>Tests de connexion</h2>
<h2>Routage et firewall sur le serveur</h2>
        </article></aside><!-- /#featured -->
                <h1>Autres articles</h1>
                <hr />
                    <ol id="posts-list" class="hfeed">
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="./notes-about-vim.html" rel="bookmark" title="Permalien vers «Notes about Vim»">Notes about Vim</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
                        <abbr class="published" title="2019-05-19T15:50:00+02:00">
                                Publié le 19/05/2019 &agrave; 15:50
                        </abbr>

                        <address class="vcard author">
                                Par <a class="url fn" href="#">fccagou</a>
                        </address>
                        <p> Dans <a href="./category/editors.html">Editors</a></p>
<p>tags: <a href="./tag/editors.html">Editors</a><a href="./tag/vim.html">Vim</a></p></p>                    <p></p>
                </footer><!-- /.post-info -->
                <h1>Correction orthographique</h1>
<h2>Pré requis</h2>
<p>Sur <em>ArchLinux</em>, il faut installer la paquet <em>vim-spell-fr</em> qui contient les
fichiers de dictionnaire:</p>
<div class="highlight"><pre><span></span><span class="err">vim-spell-fr /usr/share/licenses/vim-spell-fr/README</span>
<span class="err">vim-spell-fr /usr/share/vim/vimfiles/spell/fr.latin1.spl</span>
<span class="err">vim-spell-fr /usr/share/vim/vimfiles/spell/fr.latin1.sug</span>
<span class="err">vim-spell-fr /usr/share/vim/vimfiles/spell/fr.utf-8 …</span></pre></div>
                <a class="readmore" href="./notes-about-vim.html">Lire la suite...</a>
                </div><!-- /.entry-content -->
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="./git-advanced-by-tim-burglund.html" rel="bookmark" title="Permalien vers «Git Advanced by Tim Burglund»">Git Advanced by Tim Burglund</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
                        <abbr class="published" title="2019-05-19T10:33:00+02:00">
                                Publié le 19/05/2019 &agrave; 10:33
                        </abbr>

                        <address class="vcard author">
                                Par <a class="url fn" href="#">fccagou</a>
                        </address>
                        <p> Dans <a href="./category/it.html">IT</a></p>
<p>tags: <a href="./tag/development.html">Development</a><a href="./tag/git.html">Git</a></p></p>                    <p></p>
                </footer><!-- /.post-info -->
                <h1>Présentation</h1>
<p>Notes prises à partir de la
<a href="https://player.vimeo.com/video/49444883">présentation</a> de Tim Berglund
(<a href="https://twitter.com/tlberglund">@tlberglund</a>/tlberglund@github.com /
<a href="https://github.com/training">Github</a>).</p>
<p>Les thèmes abordés lors de la présentation </p>
<ul>
<li><em>commit</em> à la main (repo internals)</li>
<li>Rebase interactif</li>
<li>Pull rebase</li>
<li>External diff tools</li>
<li>Reflog</li>
<li>Reset</li>
</ul>
<p>Ceux qui ne l'ont pas été par manque de temps</p>
<ul>
<li>Pull request …</li></ul>
                <a class="readmore" href="./git-advanced-by-tim-burglund.html">Lire la suite...</a>
                </div><!-- /.entry-content -->
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="./what-about-udev.html" rel="bookmark" title="Permalien vers «what about udev ?»">what about udev ?</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
                        <abbr class="published" title="2019-05-18T00:00:00+02:00">
                                Publié le 18/05/2019 &agrave; 00:00
                        </abbr>

                        <address class="vcard author">
                                Par <a class="url fn" href="#">fccagou</a>
                        </address>
                        <p> Dans <a href="./category/draft.html">Draft</a></p>
<p>tags: <a href="./tag/linux.html">Linux</a><a href="./tag/kernel.html">kernel</a><a href="./tag/udev.html">udev</a></p></p>                    <p></p>
                </footer><!-- /.post-info -->
                <h1>Presentation</h1>
<p>udev job is to manage '/dev' directory with kernel input output events.
Udev is implemented by <a href="">systemd-udevd</a></p>
<h1>Blink(1) Led  exemple</h1>
<div class="highlight"><pre><span></span><span class="err">udevadm monitor</span>
<span class="err">monitor will print the received events for:</span>
<span class="err">UDEV - the event which udev sends out after rule processing</span>
<span class="err">KERNEL - the kernel uevent</span>
</pre></div>


<h2>Unplugging LED under CentOS 7 …</h2>
                <a class="readmore" href="./what-about-udev.html">Lire la suite...</a>
                </div><!-- /.entry-content -->
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="./some-it-tips.html" rel="bookmark" title="Permalien vers «Some IT TIPS»">Some IT TIPS</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
                        <abbr class="published" title="2019-05-12T11:34:00+02:00">
                                Publié le 12/05/2019 &agrave; 11:34
                        </abbr>

                        <address class="vcard author">
                                Par <a class="url fn" href="#">fccagou</a>
                        </address>
                        <p> Dans <a href="./category/tips.html">TIPS</a></p>
<p>tags: <a href="./tag/linux.html">Linux</a><a href="./tag/divers.html">Divers</a><a href="./tag/tips.html">TIPS</a></p></p>                    <p></p>
                </footer><!-- /.post-info -->
                <h1>Openssl, make multi DNS certificat</h1>
<div class="highlight"><pre><span></span><span class="n">openssl</span><span class="w"> </span><span class="n">req</span><span class="w"> </span><span class="o">-</span><span class="k">new</span><span class="w"> </span><span class="o">-</span><span class="n">sha256</span><span class="w"> </span><span class="o">-</span><span class="k">key</span><span class="w"> </span><span class="k">domain</span><span class="p">.</span><span class="k">key</span><span class="w"> </span><span class="o">-</span><span class="n">subj</span><span class="w"> </span><span class="ss">&quot;/C=US/ST=CA/O=Acme, Inc./CN=example.com&quot;</span><span class="w"> </span><span class="o">-</span><span class="n">reqexts</span><span class="w"> </span><span class="n">SAN</span><span class="w"> </span><span class="o">-</span><span class="n">config</span><span class="w"> </span><span class="o">&lt;</span><span class="p">(</span><span class="n">cat</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ssl</span><span class="o">/</span><span class="n">openssl</span><span class="p">.</span><span class="n">cnf</span><span class="w"> </span><span class="o">&lt;</span><span class="p">(</span><span class="n">printf</span><span class="w"> </span><span class="ss">&quot;[SAN]\nsubjectAltName=DNS:example.com,DNS:www.example.com&quot;</span><span class="p">))</span><span class="w"> </span><span class="o">-</span><span class="k">out</span><span class="w"> </span><span class="k">domain</span><span class="p">.</span><span class="n">csr</span><span class="w"></span>
</pre></div>


<h1>Debian Netinstallation</h1>
<p>https://www.debian.org …</p>
                <a class="readmore" href="./some-it-tips.html">Lire la suite...</a>
                </div><!-- /.entry-content -->
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="./rhel8-whats-new.html" rel="bookmark" title="Permalien vers «RHEL8 what's new ?»">RHEL8 what's new ?</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
                        <abbr class="published" title="2019-05-08T23:52:00+02:00">
                                Publié le 08/05/2019 &agrave; 23:52
                        </abbr>

                        <address class="vcard author">
                                Par <a class="url fn" href="#">fccagou</a>
                        </address>
                        <p> Dans <a href="./category/rhel8.html">rhel8</a></p>
<p>tags: <a href="./tag/linux.html">Linux</a><a href="./tag/redhat.html">RedHat</a><a href="./tag/system.html">System</a><a href="./tag/french.html">French</a></p></p>                    <p></p>
                </footer><!-- /.post-info -->
                <h1>Actions menées</h1>
<ul>
<li>Récupération de l'iso sur le site de <a href="https://www.redhat.com">RedHat</a></li>
<li>Installation dans une VM</li>
</ul>
<h1>Contenu de l'ISO</h1>
<h2>Racine de l'ISO</h2>
<ul>
<li>extra_files.json: contient les nomx, tailles et sum des fichiers KEY, EULA
  et GPL</li>
<li>EULA: licence</li>
<li>GPL: licence</li>
<li>media.repo: configuration yum</li>
<li>RPM-GPG-KEY-redhat-beta : clef de signature</li>
<li>RPM-GPG-KEY-redhat-release : clef de signature …</li></ul>
                <a class="readmore" href="./rhel8-whats-new.html">Lire la suite...</a>
                </div><!-- /.entry-content -->
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="./cups-under-arch.html" rel="bookmark" title="Permalien vers «CUPS under Arch»">CUPS under Arch</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
                        <abbr class="published" title="2019-04-11T22:33:00+02:00">
                                Publié le 11/04/2019 &agrave; 22:33
                        </abbr>

                        <address class="vcard author">
                                Par <a class="url fn" href="#">fccagou</a>
                        </address>
                        <p> Dans <a href="./category/it.html">IT</a></p>
<p>tags: <a href="./tag/linux.html">Linux</a><a href="./tag/cups.html">Cups</a><a href="./tag/arch.html">Arch</a><a href="./tag/french.html">French</a></p></p>                    <p></p>
                </footer><!-- /.post-info -->
                <h2>Installation</h2>
<div class="highlight"><pre><span></span>$ pacman -Sy cups cups-pdf hplip
$ systemctl start org.cups.cupsd.socket
</pre></div>


<h2>Configuration d'une imprimante</h2>
<p>List all devices:</p>
<div class="highlight"><pre><span></span>$ lpinfo -v
<span class="o">=</span>&gt; résultat utilisé pour option -v de lpadmin
</pre></div>


<p>List all drivers:</p>
<div class="highlight"><pre><span></span>$ lpinfo -m
<span class="o">=</span>&gt; résultat utilisé pour option -m de lpadmin
</pre></div>


<p>List drivers matching "HP LaserJet":</p>
<div class="highlight"><pre><span></span>$ lpinfo --make-and-model <span class="s2">&quot;HP LaserJet&quot;</span> -m
$ lpinfo …</pre></div>
                <a class="readmore" href="./cups-under-arch.html">Lire la suite...</a>
                </div><!-- /.entry-content -->
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="./puppet-6x.html" rel="bookmark" title="Permalien vers «Puppet 6.x»">Puppet 6.x</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
                        <abbr class="published" title="2019-02-23T12:17:00+01:00">
                                Publié le 23/02/2019 &agrave; 12:17
                        </abbr>

                        <address class="vcard author">
                                Par <a class="url fn" href="#">fccagou</a>
                        </address>
                        <p> Dans <a href="./category/draft.html">Draft</a></p>
<p>tags: <a href="./tag/linux.html">Linux</a><a href="./tag/puppet.html">Puppet</a><a href="./tag/devops.html">DevOPS</a><a href="./tag/configuration.html">configuration</a></p></p>                    <p></p>
                </footer><!-- /.post-info -->
                <p><strong>Étude en cours ...</strong></p>
<h1>Pré-requis / Entrants</h1>
<ul>
<li>CentOS 7 minimal</li>
<li>Partitionnement <a href="https://www.ssi.gouv.fr/administration/guide/recommandations-de-securite-relatives-a-un-systeme-gnulinux/">reco
  ANSSI</a></li>
<li>Selinux activé (What else !)</li>
<li>Sources<ul>
<li>Dépôt CentOS</li>
<li>Sélection parmi EPEL</li>
<li><a href="https://puppet.com">Puppet</a></li>
<li>Produire des rpm et avoir les sources.</li>
<li>Doit être signé</li>
</ul>
</li>
</ul>
<h1>Références documentaires</h1>
<ul>
<li><a href="https://puppet.com/docs/puppet/latest/puppet_index.html">Documentation générale</a></li>
<li><a href="https://forge.puppet.com/puppetlabs/puppetdb/readme">Documentation puppetdb</a></li>
</ul>
<h1>Architecture</h1>
<p>On retrouve 4 éléments:</p>
<ul>
<li><strong>puppet-agent</strong> sur les nœuds à configurer</li>
<li><strong>puppetserver …</strong></li></ul>
                <a class="readmore" href="./puppet-6x.html">Lire la suite...</a>
                </div><!-- /.entry-content -->
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="./custom-boot.html" rel="bookmark" title="Permalien vers «Custom boot»">Custom boot</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
                        <abbr class="published" title="2019-01-29T22:33:00+01:00">
                                Publié le 29/01/2019 &agrave; 22:33
                        </abbr>

                        <address class="vcard author">
                                Par <a class="url fn" href="#">fccagou</a>
                        </address>
                        <p> Dans <a href="./category/it.html">IT</a></p>
<p>tags: <a href="./tag/linux.html">Linux</a><a href="./tag/custom.html">Custom</a><a href="./tag/boot.html">boot</a><a href="./tag/grub.html">grub</a><a href="./tag/plymouth.html">plymouth</a></p></p>                    <p></p>
                </footer><!-- /.post-info -->
                <h2>Pour changer l'image sur le menu grub</h2>
<p>Choisir une image et remplacer /boot/grub2/splatch.png</p>
<p>Modifier /etc/default/grub</p>
<div class="highlight"><pre><span></span><span class="err">   GRUB_TIMEOUT=5</span>
<span class="err">   GRUB_DISTRIBUTOR=&quot;$(sed &#39;s, release .*$,,g&#39; /etc/system-release)&quot;</span>
<span class="err">   GRUB_DEFAULT=saved</span>
<span class="err">   GRUB_DISABLE_SUBMENU=true</span>
<span class="err">-&gt; #GRUB_TERMINAL_OUTPUT=&quot;console&quot;</span>
<span class="err">   GRUB_CMDLINE_LINUX=&quot;crashkernel=auto rd.lvm.lv=centos/root rd.lvm.lv=centos/swap rhgb quiet …</span></pre></div>
                <a class="readmore" href="./custom-boot.html">Lire la suite...</a>
                </div><!-- /.entry-content -->
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="./some-doc-about-libvirt.html" rel="bookmark" title="Permalien vers «Some doc about libvirt»">Some doc about libvirt</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
                        <abbr class="published" title="2018-11-05T01:23:00+01:00">
                                Publié le 05/11/2018 &agrave; 01:23
                        </abbr>

                        <address class="vcard author">
                                Par <a class="url fn" href="#">fccagou</a>
                        </address>
                        <p> Dans <a href="./category/it.html">IT</a></p>
<p>tags: <a href="./tag/linux.html">Linux</a><a href="./tag/virtualization.html">virtualization</a><a href="./tag/libvirt.html">libvirt</a></p></p>                    <p></p>
                </footer><!-- /.post-info -->
                <p>Installation de libvirt et virt-manager</p>
<div class="section" id="dnsmasq">
<h2>dnsmasq</h2>
<p>libvirt utilise dnsmasq</p>
<p>Exemple de fichier de configuration:</p>
<pre class="literal-block">
strict-order
pid-file=/var/run/libvirt/network/default.pid
except-interface=lo
bind-dynamic
interface=virbr0
dhcp-range=192.168.122.2,192.168.122.254
dhcp-no-override
dhcp-leasefile=/var/lib/libvirt/dnsmasq/default.leases
dhcp-lease-max=253
dhcp-hostsfile=/var/lib/libvirt …</pre></div>
                <a class="readmore" href="./some-doc-about-libvirt.html">Lire la suite...</a>
                </div><!-- /.entry-content -->
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="./apt-conf-on-readonly-system.html" rel="bookmark" title="Permalien vers «Apt conf on readonly system»">Apt conf on readonly system</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
                        <abbr class="published" title="2018-09-24T22:14:00+02:00">
                                Publié le 24/09/2018 &agrave; 22:14
                        </abbr>

                        <address class="vcard author">
                                Par <a class="url fn" href="#">fccagou</a>
                        </address>
                        <p> Dans <a href="./category/it.html">IT</a></p>
<p>tags: <a href="./tag/linux.html">Linux</a><a href="./tag/custom.html">Custom</a><a href="./tag/debian.html">Debian</a><a href="./tag/apt.html">Apt</a><a href="./tag/security.html">Security</a></p></p>                    <p></p>
                </footer><!-- /.post-info -->
                <h1>In the apt configuration</h1>
<div class="highlight"><pre><span></span><span class="nv">DPkg</span> <span class="p">{</span>
    <span class="o">//</span> <span class="nv">Auto</span> <span class="s s-Atom">re</span><span class="o">-</span><span class="s s-Atom">mounting</span> <span class="s s-Atom">of</span> <span class="s s-Atom">a</span> <span class="s s-Atom">readonly</span> <span class="o">/</span>
    <span class="nv">Pre</span><span class="o">-</span><span class="nv">Invoke</span> <span class="p">{</span> <span class="s2">&quot;mount -o remount,rw /&quot;</span><span class="p">;</span> <span class="p">};</span>
    <span class="nv">Post</span><span class="o">-</span><span class="nv">Invoke</span> <span class="p">{</span> <span class="s2">&quot;test ${NO_APT_REMOUNT:-no} = yes || mount -o remount,ro / || true&quot;</span><span class="p">;</span> <span class="p">};</span>
<span class="p">};</span>
</pre></div>
                <a class="readmore" href="./apt-conf-on-readonly-system.html">Lire la suite...</a>
                </div><!-- /.entry-content -->
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="./docker-on-centos-7.html" rel="bookmark" title="Permalien vers «Docker on CentOS 7»">Docker on CentOS 7</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
                        <abbr class="published" title="2018-09-23T00:49:00+02:00">
                                Publié le 23/09/2018 &agrave; 00:49
                        </abbr>

                        <address class="vcard author">
                                Par <a class="url fn" href="#">fccagou</a>
                        </address>
                        <p> Dans <a href="./category/it.html">IT</a></p>
<p>tags: <a href="./tag/linux.html">Linux</a><a href="./tag/virtualization.html">Virtualization</a><a href="./tag/container.html">Container</a><a href="./tag/centos.html">CentOS</a></p></p>                    <p></p>
                </footer><!-- /.post-info -->
                <h1>Installation</h1>
<div class="highlight"><pre><span></span>$ yum install docker
$ systemctl <span class="nb">enable</span> docker
$ systemctl start docker
</pre></div>


<h1>Configuration</h1>
<p>Autorisation d'un utilisateur lambda</p>
<div class="highlight"><pre><span></span><span class="err">gpasswd -a docker francois</span>
</pre></div>


<h1>Utilisation</h1>
<p>Liste des images</p>
<div class="highlight"><pre><span></span><span class="err">docker images</span>
</pre></div>


<h1>Créer sa propre image de base</h1>
<div class="highlight"><pre><span></span><span class="err">curl --insecure -O https://raw.githubusercontent.com/docker/docker/master/contrib/mkimage-yum.sh</span>
</pre></div>


<p>Apport de modifications.</p>
<h1>Exemple d'utilisation de …</h1>
                <a class="readmore" href="./docker-on-centos-7.html">Lire la suite...</a>
                </div><!-- /.entry-content -->
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="./multi-screen-on-linux.html" rel="bookmark" title="Permalien vers «Multi screen on Linux»">Multi screen on Linux</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
                        <abbr class="published" title="2018-09-23T00:49:00+02:00">
                                Publié le 23/09/2018 &agrave; 00:49
                        </abbr>

                        <address class="vcard author">
                                Par <a class="url fn" href="#">fccagou</a>
                        </address>
                        <p> Dans <a href="./category/it.html">IT</a></p>
<p>tags: <a href="./tag/linux.html">Linux</a><a href="./tag/custom.html">Custom</a><a href="./tag/screen.html">Screen</a><a href="./tag/french.html">French</a></p></p>                    <p></p>
                </footer><!-- /.post-info -->
                <h1>Choisir le bon moniteur au boot</h1>
<p>Des références dans les forum:
<a href="https://www.centos.org/forums/viewtopic.php?t=62575">CentOS</a>
<a href="https://forums.fedoraforum.org/showthread.php?239526-GDM-login-on-wrong-Monitor">Fedora</a></p>
<p>Essayer l'ordre de connexion sur la carte</p>
<p>TIPS: Simply move your mouse to the monitor you want the GDM greeter to show
      and press Enter; IS THAT SIMPLE!!!  SOLVED</p>
<p>De manière dynamique, utiliser <code>xrandr</code></p>
<div class="highlight"><pre><span></span>$ xrandr
$ xrandr -q …</pre></div>
                <a class="readmore" href="./multi-screen-on-linux.html">Lire la suite...</a>
                </div><!-- /.entry-content -->
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="./linux-infra-configuration.html" rel="bookmark" title="Permalien vers «Linux infra configuration»">Linux infra configuration</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
                        <abbr class="published" title="2017-12-11T18:31:00+01:00">
                                Publié le 11/12/2017 &agrave; 18:31
                        </abbr>

                        <address class="vcard author">
                                Par <a class="url fn" href="#">fccagou</a>
                        </address>
                        <p> Dans <a href="./category/it.html">IT</a></p>
<p>tags: <a href="./tag/linux.html">Linux</a></p></p>                    <p></p>
                </footer><!-- /.post-info -->
                <h1>Description</h1>
<p>This document shows a way to configure Linux services to manage Linux hosts from
deployment to usage.</p>
<p>The configurations have been tested on CentOS &gt;=6 system but can be adapted to
others GNU/Linux distributions.</p>
<h1>Name resolution service</h1>
<p>Bind uses <em>named.conf</em> as default configuration file. On CentOS, the …</p>
                <a class="readmore" href="./linux-infra-configuration.html">Lire la suite...</a>
                </div><!-- /.entry-content -->
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="./how-to-make-ha-glusterfs-using-keepalived.html" rel="bookmark" title="Permalien vers «How to make HA GlusterFs using Keepalived»">How to make HA GlusterFs using Keepalived</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
                        <abbr class="published" title="2017-08-02T01:01:00+02:00">
                                Publié le 02/08/2017 &agrave; 01:01
                        </abbr>

                        <address class="vcard author">
                                Par <a class="url fn" href="#">fccagou</a>
                        </address>
                        <p> Dans <a href="./category/it.html">IT</a></p>
<p>tags: <a href="./tag/linux.html">Linux</a><a href="./tag/ha.html">HA</a><a href="./tag/gluster.html">Gluster</a><a href="./tag/keepalived.html">Keepalived</a><a href="./tag/distributedfs.html">distributedfs</a></p></p>                    <p></p>
                </footer><!-- /.post-info -->
                <p>Example tested on 2 CentOS7 VM</p>
<div class="highlight"><pre><span></span><span class="o">!</span> <span class="n">Configuration</span> <span class="n">File</span> <span class="k">for</span> <span class="n">keepalived</span>

<span class="n">vrrp_script</span> <span class="n">check_glusterd</span> <span class="err">{</span>
  <span class="n">script</span>       <span class="ss">&quot;/usr/sbin/pidof glusterd&quot;</span>
  <span class="nb">interval</span> <span class="mi">5</span>
  <span class="n">fall</span> <span class="mi">1</span>
  <span class="n">rise</span> <span class="mi">1</span>
<span class="o">!</span>  <span class="n">timeout</span> <span class="n">t</span>
<span class="o">!</span>  <span class="n">weight</span> <span class="n">w</span>
<span class="err">}</span>

<span class="n">global_defs</span> <span class="err">{</span>
<span class="err">}</span>

<span class="n">vrrp_instance</span> <span class="n">gfs01</span> <span class="err">{</span>
<span class="o">!</span>    <span class="k">state</span> <span class="n">MASTER</span>
    <span class="n">interface</span> <span class="n">eth0</span>
    <span class="n">virtual_router_id</span> <span class="mi">51</span>
    <span class="n">priority</span> <span class="mi">100</span>
    <span class="n">advert_int</span> <span class="mi">1</span>
    <span class="n">nopreempt</span>
    <span class="n">authentication</span> <span class="err">{</span>
        <span class="n">auth_type</span> <span class="n">PASS</span>
        <span class="n">auth_pass</span> <span class="mi">1111</span>
    <span class="err">}</span>
    <span class="n">virtual_ipaddress</span> <span class="err">{</span>
        <span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">122 …</span></pre></div>
                <a class="readmore" href="./how-to-make-ha-glusterfs-using-keepalived.html">Lire la suite...</a>
                </div><!-- /.entry-content -->
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="./lxc-beginner.html" rel="bookmark" title="Permalien vers «LXC beginner»">LXC beginner</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
                        <abbr class="published" title="2017-07-15T12:13:00+02:00">
                                Publié le 15/07/2017 &agrave; 12:13
                        </abbr>

                        <address class="vcard author">
                                Par <a class="url fn" href="#">fccagou</a>
                        </address>
                        <p> Dans <a href="./category/it.html">IT</a></p>
<p>tags: <a href="./tag/linux.html">Linux</a><a href="./tag/container.html">Container</a><a href="./tag/lxc.html">LXC</a><a href="./tag/french.html">French</a></p></p>                    <p></p>
                </footer><!-- /.post-info -->
                <h1>Configuration environnement local</h1>
<div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="o">~/</span><span class="p">.</span><span class="n">config</span><span class="o">/</span><span class="n">lxc</span><span class="o">/</span>
<span class="n">echo</span> <span class="ss">&quot;lxc.include = /etc/lxc/default.conf&quot;</span> <span class="o">&gt;</span> <span class="o">~/</span><span class="p">.</span><span class="n">config</span><span class="o">/</span><span class="n">lxc</span><span class="o">/</span><span class="k">defaults</span><span class="p">.</span><span class="n">conf</span>
<span class="n">echo</span> <span class="ss">&quot;lxc.id_map = u 0 100000 65536&quot;</span> <span class="o">&gt;</span> <span class="o">~/</span><span class="p">.</span><span class="n">config</span><span class="o">/</span><span class="n">lxc</span><span class="o">/</span><span class="k">defaults</span><span class="p">.</span><span class="n">conf</span>
<span class="n">echo</span> <span class="ss">&quot;lxc.id_map = g 0 100000 65536&quot;</span> <span class="o">&gt;</span> <span class="o">~/</span><span class="p">.</span><span class="n">config</span><span class="o">/</span><span class="n">lxc</span><span class="o">/</span><span class="k">defaults</span><span class="p">.</span><span class="n">conf</span>
<span class="n">echo</span> <span class="ss">&quot;lxc.lxcpath=/srv/containers/lxc&quot;</span> <span class="o">&gt;</span> <span class="o">~/</span><span class="p">.</span><span class="n">config</span><span class="o">/</span><span class="n">lxc</span><span class="o">/</span><span class="n">lxc</span><span class="p">.</span><span class="n">conf</span>

<span class="n">sudo …</span></pre></div>
                <a class="readmore" href="./lxc-beginner.html">Lire la suite...</a>
                </div><!-- /.entry-content -->
        </article></li>
        
 
        <li><article class="hentry">    
                <header>
                        <h1><a href="./installation-de-cobbler-sur-centos-66.html" rel="bookmark" title="Permalien vers «Installation de cobbler sur CentOS 6.6»">Installation de cobbler sur CentOS 6.6</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
                        <abbr class="published" title="2014-11-29T20:59:00+01:00">
                                Publié le 29/11/2014 &agrave; 20:59
                        </abbr>

                        <address class="vcard author">
                                Par <a class="url fn" href="#">fccagou</a>
                        </address>
                        <p> Dans <a href="./category/it.html">IT</a></p>
<p>tags: <a href="./tag/linux.html">Linux</a><a href="./tag/admin.html">Admin</a><a href="./tag/cobbler.html">Cobbler</a><a href="./tag/french.html">French</a></p></p>                    <p></p>
                </footer><!-- /.post-info -->
                <h1>Introduction</h1>
<p>Ce texte explique comment installer cobbler sur un système CentOS 6.6.</p>
<p>La solution est testée sur la plate forme vituelle :</p>
<ul>
<li>hôte CentOS 7</li>
<li>solution de virtualisation: libvirt</li>
</ul>
<h1>Préparation de l'hôte</h1>
<h2>Configuration NFS</h2>
<div class="highlight"><pre><span></span><span class="err">mkdir /home/cobbler</span>
<span class="err">printf -- &quot;/home/cobbler   192.168.122.2(rw,no_root_squash)&quot; &gt;&gt; /etc/exports</span>
<span class="err">printf -- &quot;/home …</span></pre></div>
                <a class="readmore" href="./installation-de-cobbler-sur-centos-66.html">Lire la suite...</a>
                </div><!-- /.entry-content -->
        </article></li>
</ol><!-- /#posts-list -->
</section><!-- /#content -->

        <aside id="sidebar">
                <div class="widget">
                        <h2>Catégories</h2>
                        <ul>
                           <li ><a href="./category/draft.html">Draft</a></li>
                           <li ><a href="./category/editors.html">Editors</a></li>
                           <li ><a href="./category/it.html">IT</a></li>
                           <li ><a href="./category/rhel8.html">rhel8</a></li>
                           <li ><a href="./category/tips.html">TIPS</a></li>
                        </ul>
                </div>
                <div class="widget social">
                        <h2>Réseaux sociaux</h2>
                        <ul>
                            <li><a href="./" rel="alternate">atom feed</a></li>

                            <li><a href="https://twitter.com/fccagou">twitter</a></li>
                            <li><a href="https://github.com/fccagou">github</a></li>
                        </ul>
                </div><!-- /.social -->
        </aside><!-- /#sidebar -->

        <footer id="footer" class="body">
                <address id="about" class="vcard body">
                Ce site est généré par <a href="http://alexis.notmyidea.org/pelican/">Pelican</a>, un CMS réalisé en <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>Le thème utilisé est «NotMyIdea-CMS», une version modifiée de «NotMyIdea», le thème par défaut.</p>
        </footer><!-- /#footer -->

</body>
</html>